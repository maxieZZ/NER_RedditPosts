# Using Tools in Natural Language Processing to Analyze the Motivations, Attitudes, and Perceptions of Prescription Stimulant Users on Reddit

## Summary

As the only major controlled drug with increasing prescription rates in 2023, the rising popularity of stimulants like Adderall continues to spark debate over appropriate uses and long-term effects in adults (Jetson, 2023). To understand the impact of rising stimulant prescriptions from the perspective of users, I choose to extract and analyze posts from the subreddit r/adderall, a Reddit page dedicated to the discussion of ADHD drugs for recreational and medical use. Specifically, 6,417 relevant posts along with 13 associated features (including the overall sentiment of each post and user-derived tags) were collected from the subreddit to better understand user perspectives on medical and non-medical uses of stimulants and their perceived effects. In conducting exploratory and descriptive analysis on post features, general topics of discussion such as Medications, Questions, Co-Use, Harm Reduction, Healthcare, and Personal Experiences were identified. Relationships between features were also interrogated, with one example being an increase in negative relative to positive post sentiment during recent years. Using a topic modeling technique that leveraged embedding models and c-TF-IDF known as BERTopic, 61 additional topics were extracted from the text. These topics were more specific and contained information on physical side effects, psychological side effects, harm reduction strategies, stimulant alternatives, and personal stories detailing experiences such as barriers in accessibility or using stimulants to enhance productivity. The extracted BERTopic categories, user-derived Flair tags, and post sentiment findings were complimentary and aligned well with related literature. This approach helped to identify unmet needs surrounding prescription stimulant use, including the desire for information on ways to holistically manage ADHD symptoms rather than relying solely on pharmacological treatments like Adderall. With this NLP-based approach, we can begin to disambiguate controversies in current adult ADHD research, diagnosis, and clinical care to guide safe and appropriate prescribing practices.

## Learning Objectives

* Use Natural Language Processing (NLP) to extract and filter data from online social media forums like Reddit.
* Understand and conduct a Descriptive and Exploratory analysis of all relevant features in the Data Needs Model (DNM).
* Use BERTopic, a topic modeling technique that leverages BERT embeddings and c-TF-IDF, to extract relevant topics from the textual data of posting activity on Reddit.
* Translate results from Exploratory, Descriptive, and Topic Modeling analyses to applicable and actionable insights related to prescription stimulant use.
* Develop coding skills in Python, working specifically with toolkits like pandas, genism, nltk, and the BERTopic modeling package. 

## Proposed Outcomes

* Automated pipeline to extract a maximum number of posts from a given subreddit.
* Data Needs Model (DNM) using the available Reddit data with features that align with the investigative aim.
* Visuals for exploratory and descriptive analysis that capture relevant insights derived from the DNM and any associated relationships between features. 
* Pipelines to preprocess and tokenize text for BERTopic topic modeling analysis.

<details>

<summary>INTRODUCTION</summary>

With the capacity to stimulate the central nervous system and cause excitation, elevated mood, and increased alertness, prescription stimulant use is expanding. While prescription stimulants can be used to enhance cognitive performance, suppress appetite for weight loss, or alleviate conditions like Attention Deficit Hyperactivity Disorder (ADHD) and narcolepsy, they also have the potential for non-medical use and abuse (Favrod-Coune, 2010). The rise of prescription stimulants for non-medical use is particularly apparent in college settings, where 61.7% report diverting their stimulant prescriptions and 36% believe stimulants like Adderall, are “not harmful” and can “make them smarter” (DeSantis, 2010). Though these accounts along with rising prescription rates have raised some alarm in the wake of a devastating opioid crisis, a protracted controversy surrounding the use and impact of these stimulants remains. On the other side of this debate, studies point to the high efficacy of stimulants when prescribed properly and interpret the rise in prescription rates as correcting for the underdiagnosis of conditions like ADHD (Abdelnour, 2022). Regardless of which interpretation is accurate, it is clear that prescription stimulant use is on the rise, increasing by 70% between 2011 and 2021 (Kim, 2023). 
	To better understand the impact of this rise, information from medical and non-medical users of stimulants is essential. However, since many are reluctant to divulge accounts of non-medical stimulant use due to stigma and legality issues, this kind of data is increasingly difficult to obtain. With surveys reporting the number of non-medical stimulant users on college campuses to be anywhere from 5% to 35%, alternative data sources are needed to help narrow this wide interval (Robitaille, 2018). As a quasi-anonymous and supportive space for users to divulge personal struggles or socially stigmatized experiences, social media sites like Reddit provide one possible solution to this data problem. With a 44% growth since 2020, Reddit has over 52 million daily active users, making it the 9th most popular social media app in the US with over 25% of US adults using the site (Dean, 2023). Reddit’s popularity is due in part to its subreddit structure which allows users to create separate groups known as subreddits based on shared interest or experience. The subreddit “r/adderall” was created on April 3, 2010, and is described as “a subreddit dedicated to discussing ADHD drugs for both recreational and medical uses” (Reddit Metrics, 2018). The explicit reference to both “recreational and medical use” combined with encouragement to post authentic and personally relevant experiences with stimulants provides a rich setting for the collection of insightful data. Furthermore, r/adderall has experienced a huge surge in membership since its creation which parallels the growing rate of stimulant use, rising from 14,960 in 2015 to 115,953 in 2023 (Robitaille, 2018). The personal and largely candid perspectives that posts from this subreddit provide make it an ideal source of information from which to investigate the different perspectives of stimulant users as well as their overall attitude and perception of effects. 
	With the rise of Natural Language Processing (NLP) tools, it is also becoming increasingly possible to extract themes, patterns, and sentiment from large corpora of text in relatively short periods of time. While transformer embeddings and clustering algorithms allow for the unsupervised extraction of relevant topics from unstructured text, tools like Valence Aware Dictionary and sEntiment Reasoner (VADAR) and Linguistic Inquiry and Word Count (LIWC) provide insight into the sentiment associated with each phrase or overall topic. Using NLP tools to uncover major themes, patterns, and sentiments from user activity in the r/adderall subreddit, firsthand perspectives on stimulant use and effects can be extracted to reveal novel insights. In identifying themes and associated sentiments surrounding medical and non-medical use of prescription stimulants, a more comprehensive picture of stimulant use can be created to inform next steps and identify areas requiring further investigation.

### History of Prescription Stimulants & Uses

When looking at the most common medical use cases for prescription stimulants, a study done by the Washington State Department of Health found that nearly 90% of all FDA-approved prescriptions (dispensed from 2012-2022) were used for ADHD treatment. Other medical uses, which together made up around 10% of cases, included sleep-wake disorders like narcolepsy and weight loss (Jetson, 2023). To understand how prescription stimulants became so commonly linked with ADHD, I conducted a brief literature search on reviews examining the history of prescription stimulants in conjunction with ADHD. In the early 1900s, most people did not accept ADHD as an actual disorder, claiming instead that it was an “abnormal defect” of moral control that described “high-grade feeble-minded” children (Martinez-Badia, 2015). However, in 1937, Charles Bradley accidentally discovered the potential use of Benzedrine (one of the first synthesized amphetamine stimulants) upon noticing that, rather than helping with this initial goal to alleviate headaches, it helped children instead with behavior and school performance (Bradley, 1937). Although ADHD was not recognized yet as a disorder (known then as “hyperkinetic impulsivity”), this finding set off the first wave of interest in stimulants, beginning with Adderall’s synthesis in 1960 and continuing with the discovery of Ritalin (the first methylphenidate stimulant) for “emotionally disturbed children” in 1963 (Conners, 1963). In response to the rising popularity of stimulants and their efficacy in alleviating ADHD symptoms, the Diagnostic and Statistical Manual (DSM) partially recognized ADHD for the first time as “disorders of hyperkinetic reaction of childhood or adolescence and organic brain syndrome” (2nd ed.; DSM–II; American Psychiatric Association, 1968). This acknowledgment would spark some of the first controversy around stimulants for the treatment of ADHD, with reports of heavily medicated school children invoking a worried skepticism that culminated in the Comprehensive Drug Abuse Prevention and Control Act of 1971, making stimulants like Ritalin and Adderall Schedule II drugs (Gabay, 2013). As the battle between skeptics and advocates continued, treatment for ADHD has become more and more widespread, although an updated American Academy of Pediatrics (AAP) cautioned that prescription stimulants should be combined “with appropriate management of a child’s environment and curriculum” (Colson, 1997). Since then, several popular prescription stimulants have risen in popularity and are described in more detail in Table 1. 

<img src="images/table1.png?raw=true"/>

While many other medications contain the same active ingredients as those listed in Table 1, this investigation will focus on the four most popular prescription stimulant medications, including Adderall XR, Adderall IR, Vyvanse, and Ritalin. 

### Attention Deficit Hyperactivity Disorder (ADHD)

With ADHD as the driving force behind most stimulant prescriptions, it’s important to understand its prevalence and history within the general population. As a common neurodevelopmental disorder, ADHD occurs in approximately 5-7.2% of children and 2.5-6.7% of adults, serving as a possible precursor to psychiatric conditions like depression anxiety or addiction as well as conditions like obesity (Sibley, 2023; Abdelnour, 2022). Like the rise in stimulant prescriptions, the prevalence of ADHD diagnoses has grown, rising from 6.1% to 10.2% from 1997 to 2016 according to national population surveys (Abdelnour, 2022). While some worry that ADHD is over-diagnosed and consequently over-prescribed, studies have shown that those who struggle with ADHD are helped immensely by prescription stimulants which are effective in up to 70% of cases (Jensen, 2007).

### Research on Adult ADHD

It’s also important to note ADHD’s gradual transition from a childhood and adolescent disorder to a lifelong condition which requires a separate set of treatment protocols given that adult care is very different from pediatric care. Unfortunately, knowledge about and support for research on adult ADHD is lagging with just under 5.5 million in active funding compared to the 42 million in funding for pediatric ADHD. Compared to depression which has only a slightly higher population prevalence than ADHD, research funds for depression are greater by nearly 10-fold (Sibley, 2023). Together, these findings suggest that adult ADHD requires additional research and funding to inform treatment using both pharmacological and non-pharmacological approaches. The growing recognition of ADHD in adults in conjunction with prescription increases raise questions about current adult ADHD research, diagnosis, and clinical care. The development of clinical recommendations for clinicians to better diagnose and treat adults with ADHD as well as guidelines for patients to manage ADHD symptoms will be critical in guiding safe and appropriate prescribing. 

### Non-Medical Uses of Prescription Stimulants

While cases of non-medical prescription stimulant use had prompted some research in the past, a 2016 paper covered by various popular news agencies played a major role in bringing these concerns to light and inspiring additional research. In this paper, emergency room data from 2006-2011 suggested that emergency department visits related to prescription stimulant use in adults increased markedly despite prescription trends remaining the same. Specifically, non-medical use increased by 67% and associated ED visits went up by 156% in adults. Furthermore, the primary source of these stimulants seemed to be coming from friends or relatives, suggesting that prescribed stimulants were often diverted (Chen, 2016). Indeed, many college-age students report diverting prescribed medications, with around half diverting their prescriptions according to one study (Kinnman, 2017). When examining the motivations for these diversions, studies suggest that students tend to overestimate the cognitive benefits of stimulants while underestimating or discounting risks, believing that prescription stimulants are much safer than illicit drugs (Kinnman, 2017; DeSantis, 2010; Lueck, 2020). College students often report using prescription stimulants to help meet specific academic standards and demands, believing stimulants increase concentration and alertness, and also help with studying (Lueck, 2020). There are a few papers that attempted to measure the impact of stimulants on cognitive function and problem-solving capabilities of medically prescribed and non-prescribed participants. In one randomized double-blinded trial conducted on non-prescribed users, researchers found that prescription stimulants increased motivation to perform a given task but often decreased the quality of effort when executing the task (Bowman, 2023). The underestimation of risk combined with conflicting points on the benefits of Adderall for focus motivates the need for a better understanding of user perspective and experience to inform appropriate care.

### Reported Side-Effects of Prescription Stimulants

Compared to cocaine or methamphetamine, the kinetics of amphetamine stimulants are less rewarding because they have a slower rate of reuptake in the brain (Heal, 2013). However, long-term use of stimulants, even when prescribed by a doctor, can lead to tolerance which requires higher or more frequent doses and increases the potential for substance abuse. If addiction to prescription stimulants occurs, a person may be vulnerable to symptoms like fatigue, depression, and sleep problems in the case of withdrawal (National Institute on Drug Abuse, 2018). In 2007, warning labels on prescription stimulant medications for ADHD were also updated to include risks for adverse cardiovascular events and psychiatric symptoms like delusional thinking or mania (U.S Food and Drug Administration, 2011). Indeed, a fair number of articles have reported adverse cardiovascular events, particularly in adults (Lewares, 2023; Tadrous, 2021; Sichilima, 2009; Torres-Acosta, 2020). Adderall XR was even withdrawn from the Canadian market in February of 2005 due to concerns of possible cardiotoxicity and cerebral vascular events in a small number of individuals who had taken the medication (Cheng, 2007). After appealing the decision, the committee concluded it was “biologically plausible” that stimulants increased the risk of adverse cardiovascular events, but methodologically weak analyses and inconclusive proof suggested that it should be reinstated on the market with a revised cautionary label (Kondro, 2005). While there are many side effects associated with these prescription stimulants, the most common include decreased appetite, trouble sleeping, and headaches (Fredriksen, 2014). Depression or anxiety can also result in cases of addiction along with psychosis, anger, paranoia, and gastrointestinal issues. Behavioral therapies can be effective not only in helping people stop abusing stimulants but also in managing ongoing prescription use and associated side effects (National Institute on Drug Abuse, 2018). 

### Recent Trends in Prescription Stimulant Use

Along with a brief history, medical and non-medical uses, and side effects of prescription stimulants, it's important to understand how documented prescription stimulant use has changed over time and whether specific demographic groups are affected. While it is difficult to find data to track the activity of non-medical stimulant users, the CDC analyzed MarketScan commercial claims to describe trends in prescription stimulant fills before and during the COVID-19 pandemic (2016-2021). In their report, the CDC noted that the percentage of enrollees with one or more prescription stimulant fills increased from 3.6% in 2016 to 4.1% in 2021. However, from 2020-2021, the percentage of females aged 15-44 and males aged 25-44 with prescription stimulant fills increased by more than 10% (Danielson, 2023). Since most of these prescriptions were matched with ADHD diagnosis codes, the CDC discussed a few different theories that could explain this phenomenon. The first explanation centered around the historical and incorrect definition of ADHD being a childhood disorder that was more common among boys. Now that ADHD is increasingly being recognized as a lifelong condition that might be underdiagnosed and undertreated in both girls and young adults, these changes may have contributed to the steady rise and spike in stimulant prescriptions during 2021. Another theory emphasizes the COVID-19 pandemic which may have exacerbated ADHD symptoms due to associated stress, depression, and/or anxiety. The increase in prescriptions and diagnoses could also be partially due to the expansion of telehealth services during the COVID-19 pandemic which were given a temporary allowance to prescribe virtually, making it much easier for people to obtain prescription stimulants (Prescribing controlled substances via telehealth, 2023).  In October of 2022, the U.S. Food and Drug Administration (FDA) formally announced a shortage of Adderall with very little explanation and a massive gap in available manufacturing reporting information (Weiss, 2023). This ongoing shortage combined with the 2021 surge in prescription rates and controversy over use cases motivates the need to understand user perspectives surrounding medical and non-medical uses and the impact of prescription stimulants. 

</details>

<details>

<summary>METHODS</summary>

### Data Needs Model

Following a Data Quality (DQ) assessment framework proposed by Diaz et al. (2019), my aim to identify major themes and associated sentiments in the subreddit r/adderall was mapped to an analytical design. Specifically, all extractable measures available through the Reddit API were examined to determine whether they could be used to answer my research question. Based on this analysis, a Data Needs Model (DNM) was developed that incorporated features that were relevant to my investigative aim and defined an ideal dataset. While the process of constructing the DNM was iterative based on the quality and quantity of extracted data, it created a systematic process from which the data could be saved to an accessible tabular format. During the process of defining the DNM, the format was designed to be in 3rd normal form (Tidy Data) which meant that each variable was in one column only, each observation was in its separate row, and related variables could be linked together. The finalized version of the DNM was a single table with each row representing a given post and each column representing the extracted feature of a given post. The name of each feature along with its data type and description is given in Table 2 below.

<img src="images/table2.png?raw=true"/>

The final DNM design given above was produced only after many iterations and some of the included variables were added later after preprocessing. As one example, the “Sentiment” feature was created after data extraction/filtering by applying the VADER sentiment analysis tool in Python to the “Text” feature. The “Rising,” “Top,” “New,” “Controversial,” and “Hot” features on the other hand were all sorting categories required by the Python Reddit API Wrapper (PRAW) to extract posts from the r/adderall subreddit. Figure 1 given below shows the layout of these features on a webpage. 

<img src="images/figure1.png?raw=true"/>

On the right-hand side of Figure 1, a description of the subreddit is posted along with the name of the subreddit (r/adderall), the total number of members (~116,000), and the number of members currently online (66). On the left-hand side of the page, users can view posts and affiliated comments which can be sorted according to the five different sorting categories: top posts, new posts, rising posts, hot posts, and controversial posts. When a user clicks on a given post, they have the option to give the post an “upvote” (like) or a “downvote” (dislike). Posts with a higher ratio of upvotes to downvotes are more likely to become ‘top’, ‘hot’, or ‘rising’ posts while posts with a mixture of upvotes and downvotes are more likely to be labeled as ‘controversial.’ Posts can also be sorted according to the date posted using the ‘new’ filter. While each post has a ‘text’ attribute (a longer description that makes up the main content), Reddit provides an optional feature for posts to be tagged with an attribute known as a Flair. Similar to a hashtag, a flair is a category that the user creates to describe their post. Examples of flairs include Questions, Announcements, Healthcare, or a specific medication (eg Adderall, Ritalin, Vyvanse… etc.). 

Using PRAW, features were extracted from each post based on the DNM requirements and saved to a tabular format using pandas. Because Reddit sets a limit on the number of extractable posts, only the top 1000 posts from each of the five sorting categories (top, rising, hot, controversial, new) were saved. Since subreddits are also monitored by moderators who can remove offensive or unrelated posts, the number of posts extracted from each sorting category was less than 1000 and resulted in a total of 1,992 extracted posts once duplicates were filtered. To more posts for topic analysis, I discovered a keyword search function on the API which I used to extract an additional 5,260 posts by filtering for the maximum number of posts containing the top 1-200 most common dictionary words. In total, this search process resulted in 6,452 posts which were used for further descriptive, exploratory, and BERTopic analyses.

After the data was successfully extracted, descriptive analysis was conducted on each feature to assess data quality, filter any unrelated posts, and iteratively improve the DNM design to inform next steps in topic modeling and sentiment analysis. Using the vaderSentiment SentimentIntensityAnalyzer tool in Python, the overall sentiment was calculated for each post text and added to the DNM as an additional feature (see Table 1). Exploratory analysis was also conducted to interrogate any pertinent relationships between features in the DNM. 

Before performing topic analysis, the text underwent preprocessing which consisted of four major steps: cleaning (to remove punctuation, newline characters, etc.), tokenization (breaking down sentences), removal of stop words, and lemmatization. Once preprocessing was completed, I used a topic modeling Python library known as BERTopic to identify topics from the preprocessed text of posts. Combining both transformer embeddings and clustering model algorithms, BERTopic finds a vector representation for each post (known as an embedding) and then uses UMAP dimensionality reduction to maintain the local and global structure of the data while also reducing dimensionality and clustering embeddings. After assigning each post in the set to a cluster, it then retrieves the topic representation using a class-based TF-IDF (c-TF-IDF) where it selects words with the highest c-TF-IDF score to represent that given topic. While many different tools can be used to perform topic analysis in unstructured textual data, BERTopic was selected because it had significantly more success at identifying semantically relevant topics in social media data than other methods like Latent Dirichlet Allocation (LDA). Its ability to increase the coherence among terms for the same topic while removing irrelevant terms and increase the topic representation by removing synonyms and variations of the same word allows it to perform well on the Reddit dataset. 
Using the default BERTopic model parameters (n_neighbors=15, n_components=5, min_dist=0, metric=’cosine’, random_state=100), a UMAP model and BERTopic model were initiated and run using the preprocessed text of each post. Once major groupings were identified, I compared these results to the themes identified through the ‘Topic’ and ‘Flair’ features and also to the findings gleaned from my review of the literature to ensure proper evaluation. I also read keywords and subsets of posts from each topic to better understand what distinguished a given topic and labeled topics accordingly.

</details>

<details>

<summary>RESULTS</summary>

### Descriptive & Exploratory Analysis

Once the raw data was extracted via DNM specifications and converted to tabular format, each feature was examined, visualized, and filtered. With the aim of understanding and categorizing the experiences of individuals using stimulants for medical and non-medical purposes, some questions that guided the descriptive and exploratory portion of the analysis are listed below.

* How many authors are active in the data and how often do they post? How often do users engage with posts via commenting and how do users react (likes vs dislikes)? Are these reactions correlated with sentiment?
* What are the major categories among posts tagged with user-labeled Flairs? Is there a correlation between specific categories and the number of comments, year, sentiment, or likes/dislikes?

### Flair and Topic Features

The “Flair” feature was important to this analysis because it provided information on the alleged category of the given post. While some posts did not have a Flair tag, posts that did could be analyzed to determine how users chose to categorize the content of their posts. Serving as a partial proxy for a post theme, Flairs were compared to topics identified via BERTopic during evaluation to identify any overlapping topics. The Flair feature also made it easier to identify and filter any posts with categories that were unrelated to the investigative aim. For example, Flairs related to Humor/Entertainment (e.g. Joke, Humor, Dick Measuring Contest, Fuck No) or general posting rules (e.g. Megathread) are irrelevant and were therefore removed, leaving 6,417 out of 6,452 posts remaining. In this filtered set, 670 were not assigned a Flair (labeled as “Other”) while the remaining 5,747 were tagged with 1 out of 30 possible Flair categories created by users. During a qualitative analysis of posts within each Flair category, I discovered that many Flairs were similar to one another and could be combined into a broader category. As one example, the Flairs “Rave,” “Rant,” and “Too Personal” all contained detailed descriptions of user experiences with stimulants, leading me to condense them into a broader topic which I labeled “Personal_Experiences.” After repeating this process for each Flair, I was left with 10 broader categories which were added to the DNM as the “Topic” feature. The relationship between Flairs and Topxics along with the number of posts in each category is given in Table 3. 

<img src="images/table3.png?raw=true"/>

While the Topic and Flair categories help provide a general overview of user discussion, for example, asking questions or inquiring about healthcare, it is difficult to extract insightful information due to the broadness of the categories. Furthermore, the significant number of posts not tagged with Flairs limits the generalizability of topic categories and makes further thematic analysis like BERTopic and dimensionality reduction necessary. Despite these limitations, topics like “Co_Use,” “Harm_Reduction,” “Personal_Experience” “Healthcare,” and “Supplementation” do yield more unique and specific insights into user perspectives. Based on these topics, I concluded that many users are interested in supplementation, are using other substances along with stimulants, have questions and/or comments on healthcare, are eager to tell their personal stories, and are interested in lessening the negative consequences associated with stimulant use. Many posts have also been tagged as questions, suggesting that users are often coming to the site for advice or input. As the Topic category with the most posts, I found the Medication category particularly interesting because it contained so many different references to medications besides Adderall. However, when plotting the frequency of each medication type as shown in Figure 2, I noticed that 6/10 medications were tagged in less than 5 posts (with over half referencing only 1 post), while only 3 medications had a post count over 100. This suggests that, while some users are interested in learning about different brands of stimulants, the majority are interested in Adderall XR, Adderall IR, and Vyvanse.  

<img src="images/figure2.png?raw=true"/>

Since IR (an immediate-release form lasting 5-8 hours) and XR (an extended-release form lasting 10-12 hours) are often interchanged when clinicians are experimenting with prescription doses for a given patient, the distinction between the two makes sense. There is also speculation that, because Adderall IR has a quicker mechanism of action and lasts for a shorter amount of time, it is easier to abuse which would be interesting to check when comparing topics and sentiments between the two groups (Swanson, 2005). The popularity of the “Vyvanse” Flair also makes sense given that Vyvanse uses lisdexamfetamine as a prodrug which means it must get converted to an active form in the body before having any effects, reducing side effects while also lasting for a longer period of time (Goodman, 2010). Vyvanse is also one of the few FDA-approved drugs for the treatment of moderate to severe Binge Eating Disorder (BED) which, given the rise in disordered eating, aligns with current events (Fornaro, 2016). Checking for topics associated with disordered eating in downstream analyses would provide more insight into this hypothesis and will be discussed in later sections. 

### Sorting Category Features (Top, Rising, Controversial, New, Hot)
To understand the distribution of sorting categories among posts, I used Python to count the number of posts that contained every possible combination of sorting categories (with 5 categories, there were 2^5=32 possible combinations). While some posts contained only one sorting category, for example, 160 posts contained the Controversial category only while 26 contained the Top category only, the vast majority (6,318 posts total) contained combinations categories. The most popular of these combinations were posts that were both Rising and Controversial (1,089) and posts that contained all five of the sorting categories (3,675). Since over half contained all five sorting categories, I concluded that this feature may not be the best way to distinguish between the content of posts. However, I did find it interesting that the Controversial category was the most popular sorting category and was commonly combined with the Rising category, indicating that recently popular discussion was often mixed in terms of post reactions and opinions on a given topic. For a detailed breakdown of each combination of categories and post frequencies, see Appendix A.

### Date and Author Features 
To understand the distribution of authors among extracted posts, I was curious to see how many authors had recurrent posting activity, possibly indicating a stronger social network as opposed to one-time comments or questions. Since the number of unique authors in the set of 6,417 posts was 4,546, I concluded that, while some authors posted more than once, the majority of users were one-time posters. For the authors that did post more than once, I plotted the distribution of their posts (shown in Figure 3 below) and found that most authors posting more than once did so 2-4 times (712 authors) while only 71 authors posted over 5 times (though the maximum posts made by one author was 37). 

<img src="images/figure3.png?raw=true"/>

While it would be interesting to construct timelines for authors who did post a significant number of times (say over 20), the main takeaway indicated that the activity was more geared towards quick, one-time interactions between users.  
When looking at the distribution of dates for each post, I hypothesized that the number of posts would increase with the recency of the year due to the higher availability of new posts and Reddit growth. However, while the distribution of posts by year (Figure 4) shows a large and sustained increase in activity after 2015, the most significant peak in activity was the spike in 2020, after which there seems to be a sharp and sustained decrease from 2021-2023.

<img src="images/figure4.png?raw=true"/>

The rise in discussion after 2015 could be due to the increase in publicity after the Chen et al. (2016) study which documented the rise in Adderall-related ER visits and was reported by several popular media sources like NPR. The peak in 2020 is also supported by Reddit growth statistics which document a large jump from 36 million daily active users in 2019-2020 to 52 million in 2020-2021 (Turner, 2022). With the COVID-19 pandemic shutting down most in-person activities, many people spent more time on social media during the lockdown, which may explain the sharp peak in activity (Cho, 2023). Another possible explanation could be the rampant rise in stimulant prescriptions during 2020-2021, reported by the CDC to be 10% from 2020 to 2021 (Danielson, 2023). 

### UpVotes and Sentiment Features 
Since the Upvotes feature measured the ratio of post likes to dislikes while Sentiment quantified the overall positivity, negativity, or neutrality of a given post, both features were helpful in understanding the attitudes of users and could be visualized by Year or by Topic. In looking at the ratio of upvotes to downvotes in each post, the distribution in Figure 5 indicates that the majority contain upvotes only (ratio=1), suggesting that most posts were received well by the subreddit community. However, a small number of posts (around 200) contained mixed ratios of upvotes to downvotes (ratio=0.5-0.6), suggesting that there is some disagreement on the information presented in the subreddit. However, because this number is small compared to the posts with a ratio of 1, I concluded that these posts did not undermine the analysis and could be included in the results. In future work however, it would be interesting to investigate whether posts with a mixed number of upvotes and downvotes discussed different topics, indicating specific points of controversy within the thread.

<img src="images/figure5.png?raw=true"/>

Like the upvote feature, there were significantly more posts with positive sentiment (above 0) than negative sentiment (below 0). However, the spread of sentiment values was much wider than the spread of upvote ratios (Figure 6), and a large portion of posts contained neither positive nor negative leaning sentiment. Since questions and informational posts are often more neutral in terms of sentiment, along with personal stories which tend to include a range of emotional language, this could explain the large number of posts with neutral sentiment. 

<img src="images/figure6.png?raw=true"/>

When looking at the negative and positive sentiment distribution within each Topic category as shown in Figure 7, there do not seem to be any large differences since, for the most part, the ratio of positive to negative sentiment is around 3-1 regardless of the Topic category. However, topics where the ratio is closer to 2-1 were “Personal Experience,” “Harm Reduction,” “Healthcare,” and “Co_Use” suggesting that these topics might have slightly more associated negative sentiment. 

<img src="images/figure7.png?raw=true"/>

Looking at the proportion of negative to positive sentiment by year (Figure 8), I was struck by the fact that the year 2023 had one of the lowest proportions of positive relative to negative sentiment compared to past years. One possible reason for this could be due to the Adderall shortage, first announced by the FDA in the fall of 2022. As the shortage continues over a year later, surveys have indicated that many patients struggle to fill prescriptions, illustrating a direct consequence of the shortage and also a growing black market online (Weiss, 2023). With these relatively new barriers to access, it makes sense that discussion would contain more dissatisfaction and negativity. 

<img src="images/figure8.png?raw=true"/>

### Comments Feature
The final relevant feature aside from the text of the extracted post (explored during BERTopic analysis) was the total number of comments made on a given post. My assumption was that a greater number of comments would indicate greater interest in a given Topic. The distribution of Comments is given in the Figure 9 boxplot and suggests that, while the average total number of comments is only around 18, there is a relatively large number of posts with comments residing far outside the interquartile range and skewing the plot. This large subset of posts with an unusually high number of comments could indicate that the content in these posts sparked particularly prominent discussion and should be investigated further. 

<img src="images/figure9.png?raw=true"/>

### BERTopic Modeling Analysis
Using the BERTopic parameters described in the methods section, 61 topics were extracted from the set of 6,417 posts. Because there is already a feature in the DNM that I have referred to as the Topic feature, I will refer to these topics moving forward as “BERTopic topics” to distinguish between the two. When BERTopic was run on the preprocessed dataset, it generated a set of BERTopic topics where each topic was distinguished by a list of its most relevant terms (Appendix B). For each post, BERTopic generates probabilities of that post belonging to each of the generated BERTopic topics. For example, a post could have a 20% chance of belonging to BERTopic topic 1, a 10% chance of belonging to BERTopic topic 10, and an 80% chance of belonging to BERTopic topic 3. Based on these probabilities, BERTopic selects the most likely candidate which, using the previous example, would be topic 3 (with the highest probability). With this process, some posts were categorized as “outliers” because they did not seem to fit any of the generated topic labels. In the analysis, 2,968 out of the 6,417 posts were never assigned a topic and were therefore considered to be outliers. To investigate this phenomenon, I compared the number of posts in the BERTopic categorized vs uncategorized data to the post frequency for each of the 10 Topic categories. This comparison is given in Figure 10 with blue bars denoting the posts that were categorized into 1 of 61 BERTopic topics and orange bars denoting the posts that were not categorized into any BERTopic topic. 

<img src="images/figure10.png?raw=true"/>

From this plot, we can see that the number of posts in each Topic were comparable between categorized and uncategorized data, suggesting that no Topic category was ignored during the BERTopic analysis. Though the results would be more robust if all posts were categorized, I choose to continue with the analysis of the 3,449 categorized posts in the hopes that I would still be able to extract some specific insights into behavior that might not be otherwise attainable though Flair tags or literature searches.  
For the posts assigned to a BERTopic topic, I wanted to see which BERTopic topics were the largest and also whether any topics were skewed towards positive or negative sentiment. To visualize these properties across all BERTopic topics, I plotted the number of posts assigned to each topic (0-61) and colored each bar by the proportion of sentiment assigned to each post (red for negative and blue for positive), the results of which are shown in Figure 11.

<img src="images/figure11.png?raw=true"/>

The plot above indicates that BERTopic topics are ordered by the number of posts they represent, with BERTopic 0 representing the largest topic by far. While most topics have a roughly equal distribution of positive and negative sentiment, there were a few BERTopics topics with skewed sentiment proportions. BERTopic topics with higher levels of positive sentiment included topics 46, 59, 36, 12, and 13 while BERTopic topics with higher levels of negative sentiment included topics 55, 33, 16, 28, and 30. To understand the general content of these topics, I extracted the top keywords for each topic and recorded them in Table 4 below.

<img src="images/table4.png?raw=true"/>

Based on topic keywords which contained higher proportions of negative sentiment, it seemed like much of this negativity was related to unwanted side effects of Adderall. For example, headaches (topic 30) and dry mouth (topic 16) are both common negative side effects of stimulants. The literature also indicates cases of stimulants causing problems with blood circulation known as the Raynaud phenomenon which is supported by topic 28 (Dextroamphetamine And Amphetamine (Oral Route) Precautions, 2023). The BERTopic topic with the highest level of negative sentiment by far was topic 55 which seems to center around menstrual cycles, suggesting that stimulants may have a negative impact on women's reproductive health. Interestingly, the BERTopic with the highest proportion of positive sentiment centered around tyrosine, an amino acid that some speculate can be an effective alternative treatment for ADHD (Steenbergen, 2015). BERTopic Topic 12 was another positive topic that centered around the discussion of stimulant alternatives, in this case, supplements like magnesium or other vitamins. Other BERTopics Topics with high levels of positive sentiment included those discussing the use of stimulants for productivity (topic 59), the euphoric feelings induced by stimulants (topic 36), and the use of short breaks from stimulants to decrease tolerance (topic 13).
For a list of the top 10 keywords associated with each of the 61 BERTopic Topics, see Appendix C. Because so many topics were extracted, I chose to visualize intertopic distances to see if any overarching themes might relate groups of topics together. Based on these distances as shown in the plot below, I choose to categorize the 61 topics into 10 broader categories which I will refer to as Themes.

<img src="images/figure12.png?raw=true"/>

Within each theme, I manually labeled the set of contributing BERTopic topics to determine whether or not these groupings made sense and could be assigned an overarching label. The results of this manual annotation, including the label for each of the 10 themes along with a more detailed description of the included BERTopic topics are given in Table 5.

<img src="images/table5-1.png?raw=true"/>
<img src="images/table5-2.png?raw=true"/>

While some groupings make sense (e.g. Sleep Theme containing the two topics focusing on posts discussing falling asleep and dreaming on stimulants), there are others I would not have expected to be grouped together. For example, the first Group (General Effects) seemed unnecessarily large and could have been separated instead into “Co-Use,” “Discussion of Stimulant Types,” and “Side Effects.” I was also unsure of why BERTopic topic 31 (co-using with alcohol in Group 3) was not closer to the other topics discussing co-use in Group 1 (e.g. nicotine, caffeine…etc.). One possible reason behind these unexpected groupings could simply be the fact that later BERTopic topics (20-61) are much smaller than earlier topics (1-20) sometimes containing as few as 10 posts. Because these later topics refer to such a small number of posts, their content may be less relevant and should be considered with greater skepticism. 
To compare BERTopic topics with Topic feature categories, I visualized the distribution of BERTopic topics colored by the ten possible Topic categories (Figure 13) as shown below.

<img src="images/figure13.png?raw=true"/>

One group of topics that stood out from this plot were topics 6, 32, and 35 since most of their posts were also tagged with the Healthcare Topic category. When checking the keywords for these topics (see Appendix B), all three seemed to touch on a specific detail of obtaining prescription stimulants through the healthcare system. For example, while topic 6 focused on obtaining refills, topic 32 discussed costs and insurance coverage while topic 35 centered around the types of healthcare prescribers. The three topics also clustered together in the intertopic distance map (Figure 11) to form Group 6 which I labeled as the “Healthcare” Theme based on keywords and associated posts. The alignment of the Healthcare Topic category with specific BERTopics topics suggests that BERTopic assigned posts correctly and with semantic relevance. Posts with the Supplementation Topic category were also concentrated specifically in topics 12, 46, and 61 which, from looking at top keywords, contain words like magnesium, vitamin, supplement, oxide, cytomel, tyrosine, and arginine. Since most of these keywords are related to various forms of supplementation, I concluded that these topics also align well with the relevant Topic category (Supplementation). While the Medication Topic category was high in topic 0 which makes sense considering that topic 0 was centered specifically around the use of Vyvanse, I was surprised at how many BERTopic topics contained posts tagged with the Co-Use. Since only 243 of 5,747 tagged posts were tagged specifically with the Co-Use category (Table 3), its heavy representation in BERTopic categorized posts suggests the importance of co-use as a relevant theme in the data. 

</details>


